<!DOCTYPE html>
<html lang="en">
  <head>
    
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <title>They Call Me Brett</title>
    
    
    <link rel="stylesheet" href="/static/bootstrap/css/bootstrap.min.css">
    
    <link rel="stylesheet" href="/static/font-awesom/css/font-awesome.min.css">
    
    <link rel="stylesheet" href="/static/themes/yeti/css/base.css">
    
    <link rel="stylesheet" href="/static/highlight/styles/default.css">
    
    <link rel="stylesheet" href="/static/octicons/octicons.css">
    
    

    
  </head>
  
  <body>
    

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">

        
        <div class="navbar-header">
          
          
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>

          
          <a class="navbar-brand" href="..">They Call Me Brett</a>
        </div><!-- navbar-header -->

        
        <div class="navbar-collapse collapse">
          
          
          <ul class="nav navbar-nav">
	    
	    
	    
	    <li><a href="topics.html">Articles</a></li>
	    
	    
	    <li><a href="blog.html">Blog</a></li>
	    
	    
	    <li><a href="feed.html">Feeds</a></li>
	    
	    
          </ul>
          
          
          <ul class="nav navbar-nav navbar-right">
	    
            <li >
              <a rel="up" href="..">
                <i class="fa fa-arrow-up"></i> Up
              </a>
            </li>
	    
          </ul>
        </div>

      </div><!-- container -->
    </div><!-- navbar -->

    <div class="container">
      
      <div class="col-md-3">
        <div class="bs-sidebar hidden-print affix well" role="complementary">
          <ul class="nav bs-sidenav">
            <li class="main active"><a href="#">Top</a></li>
	    
<li class="">
  <a href="#sec-1">1. Overview</a></li>
<li class="">
  <a href="#sec-2">2. General Description of Detector Geometry Information</a><ul class="nav">
<li class="">
  <a href="#sec-2-1">2.1. FIXME: followed by examples of GDD info representations</a></li>
<li class="">
  <a href="#sec-2-2">2.2. FIXME: followed by examples of conversions</a></li>
<li class="">
  <a href="#sec-2-3">2.3. FIXME: followed by examples of GDD information stores, provenance tracking</a></li></ul></li>
<li class="">
  <a href="#sec-3">3. GDD Schema</a><ul class="nav">
<li class="">
  <a href="#sec-3-1">3.1. Schema elements</a></li>
<li class="">
  <a href="#sec-3-2">3.2. Collections of elements</a></li>
<li class="">
  <a href="#sec-3-3">3.3. The Schema</a></li></ul></li>

	  </ul>
	</div>
      </div>
      
      <div class="col-md-9" role="main">

	<h1 class="page-title">
	  


	  <small>
</small>
	</h1>
      
	<p/>
	
	

2014-07-28 14:10:53
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Overview</a></li>
<li><a href="#sec-2">2. General Description of Detector Geometry Information</a>
<ul>
<li><a href="#sec-2-1">2.1. FIXME: followed by examples of GDD info representations</a></li>
<li><a href="#sec-2-2">2.2. FIXME: followed by examples of conversions</a></li>
<li><a href="#sec-2-3">2.3. FIXME: followed by examples of GDD information stores, provenance tracking</a></li>
</ul>
</li>
<li><a href="#sec-3">3. GDD Schema</a>
<ul>
<li><a href="#sec-3-1">3.1. Schema elements</a></li>
<li><a href="#sec-3-2">3.2. Collections of elements</a></li>
<li><a href="#sec-3-3">3.3. The Schema</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Overview</h2>
<div class="outline-text-2" id="text-1">
<ul class="org-ul">
<li>what GGD is
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> General Description of Detector Geometry Information</h2>
<div class="outline-text-2" id="text-2">
<p>
In GGD, the structure of geometry information is described by a defined <i>schema</i>.  This schema is formal in the sense that it is a language.  The overall structure is composed of specific substructures until one reaches basic data types.  This structure is semantic in nature and not syntactical as the GDD supports multiple ways of "spelling" the same information.  That is, it supports multiple "formats" or representations.
</p>

<p>
On the other hand, any GDD schema is represented specifically in <a href="http://json.org">JSON</a> syntax and it, itself, follows a a specific structure (which could be called a meta-schema) however this schema structure is defined informally (thus avoiding infinite recursion of meta-meta-&#x2026;-schema!).  The structure of the schema and its actual definition is described in the next section.
</p>
</div>

<div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> FIXME: followed by examples of GDD info representations</h3>
</div>
<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> FIXME: followed by examples of conversions</h3>
</div>
<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3"><span class="section-number-3">2.3</span> FIXME: followed by examples of GDD information stores, provenance tracking</h3>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> GDD Schema</h2>
<div class="outline-text-2" id="text-3">
<p>
GDD geometry description information follows the GDD schema.  This schema is intentionally aligned with that of the various expected applications of GDD information.  Specifically, GDD schema allows the representing of concepts that are found in <a href="http://geant4.web.cern.ch/geant4/G4UsersDocuments/UsersGuides/ForApplicationDeveloper/html/Detector/geometry.html">Geant4</a> and <a href="http://root.cern.ch/drupal/content/geometry">ROOT</a> geometry systems as well as the important transportation format, <a href="http://cern.ch/gdml">GDML</a>.  
</p>

<p>
The GDD schema is represented as a JSON dictionary.  The keys of this dictionary name either elements of the schema or collections of element names.  
</p>
</div>

<div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> Schema elements</h3>
<div class="outline-text-3" id="text-3-1">
<p>
Elements (meaning simply "parts" not atomic elements) of the schema are represented as dictionaries.  The items of these dictionaries define the low level data member names and their types.  Types are expressed with the following strings:
</p>

<dl class="org-dl">
<dt> <code>int</code> </dt><dd>an integer number
</dd>
<dt> <code>float</code> </dt><dd>a floating point number
</dd>
<dt> <code>str</code> </dt><dd>a Unicode character string 
</dd>
<dt> <code>list</code> </dt><dd>a list of some type
</dd>
</dl>

<p>
In the case of <code>list</code>, the sub-structure and type of items a list may hold is left unspecified here.  It the expected contents of lists are specific to each instance.
</p>
</div>
</div>

<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2"><span class="section-number-3">3.2</span> Collections of elements</h3>
<div class="outline-text-3" id="text-3-2">
<p>
Schema elements which are of a like kind are collected into a top-level named list.  The items in this list are the names of the elements.
</p>
</div>
</div>

<div id="outline-container-sec-3-3" class="outline-3">
<h3 id="sec-3-3"><span class="section-number-3">3.3</span> The Schema</h3>
<div class="outline-text-3" id="text-3-3">
<p>
This section contains the full schema.  This section is the definitive source for this schema definition.  It can be extracted by loading this org-mode source file into Emacs and typing <code>C-c C-v t</code>.
</p>

<p>
The schema is expressed as an anonymous JSON dictionary so opens as:
</p>

<div class="org-src-container">

<pre class="src src-json">{
</pre>
</div>

<p>
It begins by describing the structure of allowed "shapes" or "solids".  These are largely following the <a href="http://geant4.web.cern.ch/geant4/G4UsersDocuments/UsersGuides/ForApplicationDeveloper/html/Detector/geomSolids.html">Geant4 documentation</a> for solids which serves as documentation for individual data types of the elements.  Each instance of a shape requires a unique name.
</p>

<div class="org-src-container">

<pre class="src src-json">"shapes": ["sphere", "box", "polycone"],
"sphere": {
    "name": "string",
    "r": "float"
},
"box": {
    "name": "string",
    "x": "float", 
    "y": "float", 
    "z": "float"
},
"polycone": {
    "name": "string",
    "phiStart": "float",
    "phiTotal": "float",
    "zPlane": "list",
    "rInner": "list",
    "rOuter": "list"
}
</pre>
</div>



<p>
Finally, it closes the top-level dictionary.
</p>

<div class="org-src-container">

<pre class="src src-json">}
</pre>
</div>



<p>
An actual set of data structures can then be created and validated against the structure.  For example, in Python:
</p>

<div class="org-src-container">

<pre class="src src-python">from collections import namedtuple
Sphere = namedtuple("Sphere","name r")
Box = namedtuple("Box","name x y z")
data = [
    Sphere(name="ball1", r=1.0),
    Box(name="box1",x=1.0,y=2.0,z=3.0)
]
</pre>
</div>
</div>
</div>
</div>



      <p/>
      </div><!-- main -->
      
      
    </div><!-- content container -->
    


    

    <footer class="col-md-12">
      
<hr/>
<a href="gegede.org">Org (gegede.org)</a><br>
<a href="gegede.pdf">PDF (gegede.pdf)</a><br>
<p>
  Created: 2014-07-28 14:10:53<br>
  Revised: 2014-07-28 14:10:53<br>

    </footer>

    
    
    
    <script src="/static/jquery-1.12.0.min.js"></script>
    
    <script src="/static/bootstrap/js/bootstrap.min.js"></script>
    
    <script src="/static/highlight/highlight.pack.js"></script>
    
    <script src="/static/joy.js"></script>
    
    
    
    
    
    
     
  </body>

</html>