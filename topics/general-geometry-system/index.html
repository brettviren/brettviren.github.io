<!DOCTYPE html>
<html lang="en">
  <head>
    
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <title>They Call Me Brett</title>
    
    
    <link rel="stylesheet" href="/static/bootstrap/css/bootstrap.min.css">
    
    <link rel="stylesheet" href="/static/font-awesom/css/font-awesome.min.css">
    
    <link rel="stylesheet" href="/static/themes/yeti/css/base.css">
    
    <link rel="stylesheet" href="/static/highlight/styles/default.css">
    
    <link rel="stylesheet" href="/static/octicons/octicons.css">
    
    

    
  </head>
  
  <body>
    

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">

        
        <div class="navbar-header">
          
          
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>

          
          <a class="navbar-brand" href="..">They Call Me Brett</a>
        </div><!-- navbar-header -->

        
        <div class="navbar-collapse collapse">
          
          
          <ul class="nav navbar-nav">
	    
	    
	    
	    <li><a href="topics.html">Articles</a></li>
	    
	    
	    <li><a href="blog.html">Blog</a></li>
	    
	    
	    <li><a href="feed.html">Feeds</a></li>
	    
	    
          </ul>
          
          
          <ul class="nav navbar-nav navbar-right">
	    
            <li >
              <a rel="up" href="..">
                <i class="fa fa-arrow-up"></i> Up
              </a>
            </li>
	    
          </ul>
        </div>

      </div><!-- container -->
    </div><!-- navbar -->

    <div class="container">
      
      <div class="col-md-3">
        <div class="bs-sidebar hidden-print affix well" role="complementary">
          <ul class="nav bs-sidenav">
            <li class="main active"><a href="#">Top</a></li>
	    
<li class="">
  <a href="#sec-1">1. Overview</a></li>
<li class="">
  <a href="#sec-2">2. Components</a></li>
<li class="">
  <a href="#sec-3">3. Existing Systems</a><ul class="nav">
<li class="">
  <a href="#sec-3-1">3.1. GDML</a><ul class="nav">
<li class="">
  <a href="#sec-3-1-1">3.1.1. Schema</a></li>
<li class="">
  <a href="#sec-3-1-2">3.1.2. Representations</a></li>
<li class="">
  <a href="#sec-3-1-3">3.1.3. Converters</a></li>
<li class="">
  <a href="#sec-3-1-4">3.1.4. Producers</a></li>
<li class="">
  <a href="#sec-3-1-5">3.1.5. Validation</a></li>
<li class="">
  <a href="#sec-3-1-6">3.1.6. Management</a></li></ul></li>
<li class="">
  <a href="#sec-3-2">3.2. AGDD</a><ul class="nav">
<li class="">
  <a href="#sec-3-2-1">3.2.1. Schema</a></li>
<li class="">
  <a href="#sec-3-2-2">3.2.2. Representations</a></li>
<li class="">
  <a href="#sec-3-2-3">3.2.3. Converters</a></li>
<li class="">
  <a href="#sec-3-2-4">3.2.4. Producers</a></li>
<li class="">
  <a href="#sec-3-2-5">3.2.5. Validation</a></li>
<li class="">
  <a href="#sec-3-2-6">3.2.6. Management</a></li></ul></li>
<li class="">
  <a href="#sec-3-3">3.3. DetDesc</a><ul class="nav">
<li class="">
  <a href="#sec-3-3-1">3.3.1. Schema</a></li>
<li class="">
  <a href="#sec-3-3-2">3.3.2. Representations</a></li>
<li class="">
  <a href="#sec-3-3-3">3.3.3. Converters</a></li>
<li class="">
  <a href="#sec-3-3-4">3.3.4. Producers</a></li>
<li class="">
  <a href="#sec-3-3-5">3.3.5. Validation</a></li>
<li class="">
  <a href="#sec-3-3-6">3.3.6. Management</a></li></ul></li>
<li class="">
  <a href="#sec-3-4">3.4. ROOT</a><ul class="nav">
<li class="">
  <a href="#sec-3-4-1">3.4.1. Schema</a></li>
<li class="">
  <a href="#sec-3-4-2">3.4.2. Representations</a></li>
<li class="">
  <a href="#sec-3-4-3">3.4.3. Converters</a></li>
<li class="">
  <a href="#sec-3-4-4">3.4.4. Producers</a></li>
<li class="">
  <a href="#sec-3-4-5">3.4.5. Validation</a></li>
<li class="">
  <a href="#sec-3-4-6">3.4.6. Management</a></li></ul></li>
<li class="">
  <a href="#sec-3-5">3.5. Geant4</a><ul class="nav">
<li class="">
  <a href="#sec-3-5-1">3.5.1. Schema</a></li>
<li class="">
  <a href="#sec-3-5-2">3.5.2. Representations</a></li>
<li class="">
  <a href="#sec-3-5-3">3.5.3. Converters</a></li>
<li class="">
  <a href="#sec-3-5-4">3.5.4. Producers</a></li>
<li class="">
  <a href="#sec-3-5-5">3.5.5. Validation</a></li>
<li class="">
  <a href="#sec-3-5-6">3.5.6. Management</a></li></ul></li>
<li class="">
  <a href="#sec-3-6">3.6. VGM</a><ul class="nav">
<li class="">
  <a href="#sec-3-6-1">3.6.1. Schema</a></li>
<li class="">
  <a href="#sec-3-6-2">3.6.2. Representations</a></li>
<li class="">
  <a href="#sec-3-6-3">3.6.3. Converters</a></li>
<li class="">
  <a href="#sec-3-6-4">3.6.4. Producers</a></li>
<li class="">
  <a href="#sec-3-6-5">3.6.5. Validation</a></li>
<li class="">
  <a href="#sec-3-6-6">3.6.6. Management</a></li></ul></li></ul></li>
<li class="">
  <a href="#sec-4">4. Summary</a></li>
<li class="">
  <a href="#sec-5">5. Ignore this section</a><ul class="nav">
<li class="">
  <a href="#sec-5-1">5.1. Links</a></li>
<li class="">
  <a href="#sec-5-2">5.2. Conceptual schema</a></li></ul></li>

	  </ul>
	</div>
      </div>
      
      <div class="col-md-9" role="main">

	<h1 class="page-title">
	  
A General Geometry System

	  <small>
</small>
	</h1>
      
	<p/>
	
	

2014-05-30 22:21:11<blockquote>Contemplation on a general geometry system.</blockquote>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Overview</h2>
<div class="outline-text-2" id="text-1">
<p>
This document provides a survey of existing geometry systems evaluated in terms of an general, ideal geometry system.  Here, "geometry" refers to the description of the material (and possibly field) makeup of a region of space for the purpose of simulating or reconstructing the trajectory of particles through that space.  We restrict the survey systems that employ a <a href="http://en.wikipedia.org/wiki/Constructive_solid_geometry">Constructive Solid Geometry (CSG)</a> model.
</p>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Components</h2>
<div class="outline-text-2" id="text-2">
<p>
A geometry system can be conceptually broken down into the following components:
</p>

<dl class="org-dl">
<dt> schema </dt><dd>The meta-description of the data types used to describe any particular geometry.
</dd>

<dt> representations </dt><dd>A description may be represented in various forms: persistent files, transient, in-memory collections of objects or visually as a 2D or 3D static or interactive rendering.
</dd>

<dt> converters </dt><dd>The processes by which one representation may be converted into another.
</dd>

<dt> producers </dt><dd>Mechanisms and tools to create or alter a description, usually through visual or transient representations and resulting in persistent ones.
</dd>

<dt> validation </dt><dd>Mechanisms and tools which assure some level of correctness of a description.  Validation can be performed to assure the persistent format follows a schema, that assumptions of the CSG model are satisfied (ie, no overlapped volumes) or by human inspection through visualization.
</dd>

<dt> management </dt><dd>A mechanism by which a description may undergo controlled and recorded change.
</dd>
</dl>

<p>
An ideal geometry system will provide coverage for these concepts in a cohesive manner.   All existing geometry systems considered in this survey have at least one of these components (by construction).  None cover all.   Some amount of inter-system compatibility exists and this allows for an aggregation of systems to cover more of the components.  
</p>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Existing Systems</h2>
<div class="outline-text-2" id="text-3">
<p>
This section contains a survey of existing geometry systems selected because they are of use by High Energy Physics (HEP) experiments and are known to the authors.  Each following section lists the features of the packages providing the system in terms of the components listed above.  In some cases liberty is taken in defining what packages are considered together to make up a system.  Any opportunity for inter-system compatibility is included where it may be applicable.
</p>
</div>

<div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> GDML</h3>
<div class="outline-text-3" id="text-3-1">
<p>
The <a href="http://gdml.web.cern.ch/GDML/">Geometry Description Markup Language (GDML)</a> consists of an <a href="http://service-spi.web.cern.ch/service-spi/app/releases/GDML/downloads/GDML_3_1_0.tar.gz">XML schema</a> and <a href="http://service-spi.web.cern.ch/service-spi/app/releases/GDML/downloads/CPPGDML/CPPGDML_2_4_0.tar.gz">C++</a> and <a href="http://service-spi.web.cern.ch/service-spi/app/releases/GDML/downloads/PyGDML/PyGDML_1_2_0.tar.gz">Python</a> implementations.
</p>
</div>

<div id="outline-container-sec-3-1-1" class="outline-4">
<h4 id="sec-3-1-1"><span class="section-number-4">3.1.1</span> Schema</h4>
<div class="outline-text-4" id="text-3-1-1">
<p>
GDML provides a schema as a number of XML XSD files.  Persistent XML representations may be validated parsers that support XSD.    GDML does not provide any schema for transient or visual representations.
</p>
</div>
</div>

<div id="outline-container-sec-3-1-2" class="outline-4">
<h4 id="sec-3-1-2"><span class="section-number-4">3.1.2</span> Representations</h4>
<div class="outline-text-4" id="text-3-1-2">
<p>
The GDML Python or C++ bindings packages provide support for reading and writing persistent representations that follow the GDML XSD schema.  Somewhat counter to the project's claim, there is no support for application-independent transient representation unless one counts the generic XML SAX data structures.  The Python and C++ implementation support populating Geant4 or ROOT objects from these structures.  The GDML packages provide no native representations for visualization.
</p>
</div>
</div>

<div id="outline-container-sec-3-1-3" class="outline-4">
<h4 id="sec-3-1-3"><span class="section-number-4">3.1.3</span> Converters</h4>
<div class="outline-text-4" id="text-3-1-3">
<p>
As stated above, the Python and C++ implementation libraries provide converters between XML SAX representations of GDML files and Geant4 and ROOT transient objects.  
</p>

<p>
The <a href="#sec-3-6">3.6</a> package provides converters that can read and write GDML files and sink or source descriptions in other systems.  ROOT supports reading and writing an older version of GDML files (fixme: which version?).  Geant4 can be compiled against the C++ GDML library to allow conversion of GDML file to Geant4 objects and dumping of these objects to GDML files.
</p>
</div>
</div>

<div id="outline-container-sec-3-1-4" class="outline-4">
<h4 id="sec-3-1-4"><span class="section-number-4">3.1.4</span> Producers</h4>
<div class="outline-text-4" id="text-3-1-4">
<p>
No tools for directly producing descriptions in this system are provided.  GDML XML can be written with any text editor or dumped through the available converters.
</p>
</div>
</div>

<div id="outline-container-sec-3-1-5" class="outline-4">
<h4 id="sec-3-1-5"><span class="section-number-4">3.1.5</span> Validation</h4>
<div class="outline-text-4" id="text-3-1-5">
<p>
XML validation on parsing is done based on the XSD.  There is no validation of CSG assumptions nor included visualization.
</p>
</div>
</div>

<div id="outline-container-sec-3-1-6" class="outline-4">
<h4 id="sec-3-1-6"><span class="section-number-4">3.1.6</span> Management</h4>
<div class="outline-text-4" id="text-3-1-6">
<p>
No facilities for managing descriptions are included.
</p>
</div>
</div>
</div>


<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2"><span class="section-number-3">3.2</span> AGDD</h3>
<div class="outline-text-3" id="text-3-2">
<p>
The <a href="http://hrivnac.web.cern.ch/hrivnac/Activities/Packages/AGDD/">ATLAS Generic Detector Description (AGDD)</a> consists of an <a href="http://hrivnac.web.cern.ch/hrivnac/Activities/Packages/AGDD/xsd/AGDD/">XML schema</a> and <a href="http://hrivnac.web.cern.ch/hrivnac/Activities/Packages/AGDD/JavaDoc/">Java library</a>.  Included as part of the system is the <a href="http://hrivnac.web.cern.ch/hrivnac/Activities/Packages/GraXML/">GraXML</a> package .
</p>

<p>
is a text based format conforming to an <a href="http://hrivnac.web.cern.ch/hrivnac/Activities/Packages/AGDD/Examples/AGDD.xsd">XML schema</a>.  Like GDML it allows exhaustive geometry description as well as language structures for defining constant and variable parameters, loops, arrays.  Files can be aggregated via the standard XInclude mechanism.  Beyond a physical geometry description, AGDD has support for visualization by allowing colors to be defined on volumes.
</p>
</div>

<div id="outline-container-sec-3-2-1" class="outline-4">
<h4 id="sec-3-2-1"><span class="section-number-4">3.2.1</span> Schema</h4>
</div>
<div id="outline-container-sec-3-2-2" class="outline-4">
<h4 id="sec-3-2-2"><span class="section-number-4">3.2.2</span> Representations</h4>
</div>
<div id="outline-container-sec-3-2-3" class="outline-4">
<h4 id="sec-3-2-3"><span class="section-number-4">3.2.3</span> Converters</h4>
</div>
<div id="outline-container-sec-3-2-4" class="outline-4">
<h4 id="sec-3-2-4"><span class="section-number-4">3.2.4</span> Producers</h4>
</div>
<div id="outline-container-sec-3-2-5" class="outline-4">
<h4 id="sec-3-2-5"><span class="section-number-4">3.2.5</span> Validation</h4>
</div>
<div id="outline-container-sec-3-2-6" class="outline-4">
<h4 id="sec-3-2-6"><span class="section-number-4">3.2.6</span> Management</h4>
</div>
</div>


<div id="outline-container-sec-3-3" class="outline-3">
<h3 id="sec-3-3"><span class="section-number-3">3.3</span> DetDesc</h3>
<div class="outline-text-3" id="text-3-3">
<ul class="org-ul">
<li>DetDescCnv
</li>
<li>GiGaCnv
</li>
</ul>

<p>
The <a href="https://lhcb-comp.web.cern.ch/lhcb-comp/Frameworks/DetDesc/">Detector Description (DetDesc)</a> is a text based format conforming to an <a href="http://lhcb-comp.web.cern.ch/lhcb-comp/Frameworks/DetDesc/lhcbdtd.html">XML DTD</a>.  Like GDML and AGDD it allows exhaustive geometry description as well as language structures for defining constant and variable parameters, loops and vectors.  It allows aggregation through the standard XML external entity mechanism as well as a unique reference mechanism analogous to and named identically to HTML's <code>href</code>.  It has been extended to allow for injection of XML at run-time through <a href="https://wiki.bnl.gov/dayabay/index.php?title=Detector_Description#Environment_Variable_Extension">environment variables</a>.
</p>
</div>

<div id="outline-container-sec-3-3-1" class="outline-4">
<h4 id="sec-3-3-1"><span class="section-number-4">3.3.1</span> Schema</h4>
</div>
<div id="outline-container-sec-3-3-2" class="outline-4">
<h4 id="sec-3-3-2"><span class="section-number-4">3.3.2</span> Representations</h4>
</div>
<div id="outline-container-sec-3-3-3" class="outline-4">
<h4 id="sec-3-3-3"><span class="section-number-4">3.3.3</span> Converters</h4>
</div>
<div id="outline-container-sec-3-3-4" class="outline-4">
<h4 id="sec-3-3-4"><span class="section-number-4">3.3.4</span> Producers</h4>
</div>
<div id="outline-container-sec-3-3-5" class="outline-4">
<h4 id="sec-3-3-5"><span class="section-number-4">3.3.5</span> Validation</h4>
</div>
<div id="outline-container-sec-3-3-6" class="outline-4">
<h4 id="sec-3-3-6"><span class="section-number-4">3.3.6</span> Management</h4>
</div>
</div>

<div id="outline-container-sec-3-4" class="outline-3">
<h3 id="sec-3-4"><span class="section-number-3">3.4</span> ROOT</h3>
<div class="outline-text-3" id="text-3-4">
</div><div id="outline-container-sec-3-4-1" class="outline-4">
<h4 id="sec-3-4-1"><span class="section-number-4">3.4.1</span> Schema</h4>
</div>
<div id="outline-container-sec-3-4-2" class="outline-4">
<h4 id="sec-3-4-2"><span class="section-number-4">3.4.2</span> Representations</h4>
</div>
<div id="outline-container-sec-3-4-3" class="outline-4">
<h4 id="sec-3-4-3"><span class="section-number-4">3.4.3</span> Converters</h4>
</div>
<div id="outline-container-sec-3-4-4" class="outline-4">
<h4 id="sec-3-4-4"><span class="section-number-4">3.4.4</span> Producers</h4>
</div>
<div id="outline-container-sec-3-4-5" class="outline-4">
<h4 id="sec-3-4-5"><span class="section-number-4">3.4.5</span> Validation</h4>
</div>
<div id="outline-container-sec-3-4-6" class="outline-4">
<h4 id="sec-3-4-6"><span class="section-number-4">3.4.6</span> Management</h4>
</div>
</div>


<div id="outline-container-sec-3-5" class="outline-3">
<h3 id="sec-3-5"><span class="section-number-3">3.5</span> Geant4</h3>
<div class="outline-text-3" id="text-3-5">
<p>
This "system" includes GDML support and all the vis methods.
</p>

<ul class="org-ul">
<li>Geant4 Geometry XML Converter
</li>
</ul>

<p>
<a href="http://root.cern.ch/root/vmc/XML.html">http://root.cern.ch/root/vmc/XML.html</a>
</p>
</div>

<div id="outline-container-sec-3-5-1" class="outline-4">
<h4 id="sec-3-5-1"><span class="section-number-4">3.5.1</span> Schema</h4>
</div>
<div id="outline-container-sec-3-5-2" class="outline-4">
<h4 id="sec-3-5-2"><span class="section-number-4">3.5.2</span> Representations</h4>
</div>
<div id="outline-container-sec-3-5-3" class="outline-4">
<h4 id="sec-3-5-3"><span class="section-number-4">3.5.3</span> Converters</h4>
</div>
<div id="outline-container-sec-3-5-4" class="outline-4">
<h4 id="sec-3-5-4"><span class="section-number-4">3.5.4</span> Producers</h4>
</div>
<div id="outline-container-sec-3-5-5" class="outline-4">
<h4 id="sec-3-5-5"><span class="section-number-4">3.5.5</span> Validation</h4>
</div>
<div id="outline-container-sec-3-5-6" class="outline-4">
<h4 id="sec-3-5-6"><span class="section-number-4">3.5.6</span> Management</h4>
</div>
</div>

<div id="outline-container-sec-3-6" class="outline-3">
<h3 id="sec-3-6"><span class="section-number-3">3.6</span> VGM</h3>
<div class="outline-text-3" id="text-3-6">
<p>
Converters, converters and more converters.
</p>
</div>

<div id="outline-container-sec-3-6-1" class="outline-4">
<h4 id="sec-3-6-1"><span class="section-number-4">3.6.1</span> Schema</h4>
</div>
<div id="outline-container-sec-3-6-2" class="outline-4">
<h4 id="sec-3-6-2"><span class="section-number-4">3.6.2</span> Representations</h4>
</div>
<div id="outline-container-sec-3-6-3" class="outline-4">
<h4 id="sec-3-6-3"><span class="section-number-4">3.6.3</span> Converters</h4>
</div>
<div id="outline-container-sec-3-6-4" class="outline-4">
<h4 id="sec-3-6-4"><span class="section-number-4">3.6.4</span> Producers</h4>
</div>
<div id="outline-container-sec-3-6-5" class="outline-4">
<h4 id="sec-3-6-5"><span class="section-number-4">3.6.5</span> Validation</h4>
</div>
<div id="outline-container-sec-3-6-6" class="outline-4">
<h4 id="sec-3-6-6"><span class="section-number-4">3.6.6</span> Management</h4>
</div>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Summary</h2>
<div class="outline-text-2" id="text-4">
<p>
This section to include
</p>

<ul class="org-ul">
<li>summary of the landscape, discussion of pros/cons/tradeoffs of different packages
</li>
<li>A summary "matrix" of packages vs aspects with some kind of yes/no or numerical quality value in each cell
</li>
</ul>
</div>
</div>


<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> Ignore this section</h2>
<div class="outline-text-2" id="text-5">
<p>
This section holds some temporary notes.  
</p>
</div>

<div id="outline-container-sec-5-1" class="outline-3">
<h3 id="sec-5-1"><span class="section-number-3">5.1</span> Links</h3>
<div class="outline-text-3" id="text-5-1">
<dl class="org-dl">
<dt> Maxim's agdd/gdml comparison </dt><dd><a href="http://www.star.bnl.gov/public/comp/simu/GDML/gdml_vs_agdd.html">http://www.star.bnl.gov/public/comp/simu/GDML/gdml_vs_agdd.html</a>
</dd>
<dt> Maxim's STAR simulation pages </dt><dd><a href="http://www.star.bnl.gov/public/comp/simu/newsite/">http://www.star.bnl.gov/public/comp/simu/newsite/</a>
</dd>
</dl>
</div>
</div>

<div id="outline-container-sec-5-2" class="outline-3">
<h3 id="sec-5-2"><span class="section-number-3">5.2</span> Conceptual schema</h3>
<div class="outline-text-3" id="text-5-2">
<p>
All existing schema considered here share a large overlap in schema at the conceptual level.  They all use a "solid model" as apposed to a "surface model" for their description.  This model contains these main data objects:
</p>

<dl class="org-dl">
<dt> shape </dt><dd>a.k.a. "solid" is a region of space in a specific share and size with a conventionally chosen coordinate system.  
</dd>
<dt> material </dt><dd>the collection of bulk physical properties (density, isotopes, optical properties, sometimes visualization properties).
</dd>
<dt> boundary </dt><dd>a property related to the boundary of two materials, but not associated with either (for example, to model reflection in a non-Lorentz way)
</dd>
<dt> volume </dt><dd>the aggregation of a shape, material and possibly boundaries as well as other volumes.  A sub-volume is placed w.r.t. a volume by specifying a translation and rotation.  Typically any sub-volume shapes must be completely contained in the volume shape and no sub-volume shapes may overlap.  This sub-volume placements produce a volume hierarchy.
</dd>
<dt> touchable </dt><dd>a path through the volume hierarchy in order to indicate some semantic importance to a particular region of space.
</dd>
</dl>
</div>
</div>
</div>



      <p/>
      </div><!-- main -->
      
      
    </div><!-- content container -->
    


    

    <footer class="col-md-12">
      
<hr/>
<a href="index.org">Org (index.org)</a><br>
<a href="index.pdf">PDF (index.pdf)</a><br>
<p>
  Created: 2014-05-30 22:21:11<br>
  Revised: 2014-05-30 22:21:11<br>

    </footer>

    
    
    
    <script src="/static/jquery-1.12.0.min.js"></script>
    
    <script src="/static/bootstrap/js/bootstrap.min.js"></script>
    
    <script src="/static/highlight/highlight.pack.js"></script>
    
    <script src="/static/joy.js"></script>
    
    
    
    
    
    
     
  </body>

</html>