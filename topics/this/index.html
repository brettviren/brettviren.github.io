<!DOCTYPE html>
<html lang="en">
  <head>
    
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <title>They Call Me Brett</title>
    
    
    <link rel="stylesheet" href="/static/bootstrap/css/bootstrap.min.css">
    
    <link rel="stylesheet" href="/static/font-awesom/css/font-awesome.min.css">
    
    <link rel="stylesheet" href="/static/themes/yeti/css/base.css">
    
    <link rel="stylesheet" href="/static/highlight/styles/default.css">
    
    <link rel="stylesheet" href="/static/octicons/octicons.css">
    
    

    
  </head>
  
  <body>
    

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">

        
        <div class="navbar-header">
          
          
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>

          
          <a class="navbar-brand" href="..">They Call Me Brett</a>
        </div><!-- navbar-header -->

        
        <div class="navbar-collapse collapse">
          
          
          <ul class="nav navbar-nav">
	    
	    
	    
	    <li><a href="topics.html">Articles</a></li>
	    
	    
	    <li><a href="blog.html">Blog</a></li>
	    
	    
	    <li><a href="feed.html">Feeds</a></li>
	    
	    
          </ul>
          
          
          <ul class="nav navbar-nav navbar-right">
	    
            <li >
              <a rel="up" href="..">
                <i class="fa fa-arrow-up"></i> Up
              </a>
            </li>
	    
          </ul>
        </div>

      </div><!-- container -->
    </div><!-- navbar -->

    <div class="container">
      
      <div class="col-md-3">
        <div class="bs-sidebar hidden-print affix well" role="complementary">
          <ul class="nav bs-sidenav">
            <li class="main active"><a href="#">Top</a></li>
	    
<li class="">
  <a href="#sec-1">1. Generalities</a><ul class="nav">
<li class="">
  <a href="#sec-1-1">1.1. History</a></li></ul></li>
<li class="">
  <a href="#sec-2">2. Emacs and Org</a></li>
<li class="">
  <a href="#sec-3">3. OrgOnPy</a></li>
<li class="">
  <a href="#sec-4">4. Pelican</a><ul class="nav">
<li class="">
  <a href="#sec-4-1">4.1. Machinations</a></li></ul></li>
<li class="">
  <a href="#sec-5">5. Links</a></li>

	  </ul>
	</div>
      </div>
      
      <div class="col-md-9" role="main">

	<h1 class="page-title">
	  
This site.

	  <small>Using of Emacs, Org and Python to make a web site.

</small>
	</h1>
      
	<p/>
	
	

2014-03-02 20:45:58(revised 2015-12-29 21:00:43 )<blockquote>This site is generated from Emacs Org-mode sources.  Over the years, it has evolved to use various systems.  How it is published is described.</blockquote>
<p>
This web site has evolved over time.  It is currently written with
Emacs <a href="//orgmode.org">org-mode</a>.  It's Org source is exported with <a href="https://github.com/brettviren/orgonpy">OrgOnPy</a> and <a href="http://blog.getpelican.com/">Pelican</a>.
This topic contains notes on how this is done.
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Generalities</h2>
<div class="outline-text-2" id="text-1">
<p>
I use Emacs for producing pretty much all of my information "output".
Except for Email (and IRC), I use Org mode to manage pretty much all
my text-based (non-code) output.  The main content that this web site
exposes are "topics" which are formal(ish) notes (like this one) which
I produce to remind myself what I did and for the sake of anyone else
that may be interested.  I will sometimes revise topics after their
initial "publication".
</p>
</div>

<div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> History</h3>
<div class="outline-text-3" id="text-1-1">
<p>
This site went through many iterations.  Below we go through them in reverse chronological order.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Emacs and Org</h2>
<div class="outline-text-2" id="text-2">
<p>
My <a href="https://github.com/brettviren/dot-emacs">Emacs config</a> is online.  The <a href="https://github.com/brettviren/dot-emacs/blob/master/init-org.el">Org initialization</a> adds to the
<code>org-capture-templates</code> list so I can start a "<a href="http://orgmode.org/manual/Capture.html">capture</a>" of a topic
with <code>C-c c b</code> or revisit an existing topic with <code>C-c c B</code>.  
</p>

<p>
Because a topic may include multiple files, I have this start a
sub-directory for each topic under my topics storage area
(<code>~/org-pub/topics</code>).
</p>

<p>
Each new topic is created using a <a href="https://github.com/brettviren/org-pub/blob/master/templates/topic-start.template">template</a> which will cause Org to
prompt for various items used later including title, subtitle,
category, tags (note, not same as Org headline tags) as well as
automatically fill some things like the date stamp (interpreted as a
creation date).  It also sets a <code>SETUPFILE</code> which contains some
minimal, global Org setup.
</p>

<p>
During authoring I can get a preview of how things look by doing a
local export (eg, <code>C-c C-e l p</code> for PDF, <code>C-c C-e h h</code> for HTML).
This export is not what eventually turns into the web page.
</p>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> OrgOnPy</h2>
<div class="outline-text-2" id="text-3">
<p>
Unfortunately, I have never been able to fully grok Elisp and Python
is my preferred scripting language.  So that I may process content in
Org in non-trivial ways I have developed <a href="https://github.com/brettviren/orgonpy">OrgOnPy</a>.  It works by running
some Elisp which I did manage to write with a lot of help from the Org
mailing list to get the Org document as an <code>org-element</code> tree.  It
then breaks some of the circular references that exist in that tree
before using Emacs's <code>json</code> module to convert it to JSON.  OrgOnPy
provides an <code>org-element</code>-like tree representation which can then be
used to provide Python objects which are somewhat reminiscent of their
Elisp counterparts.
</p>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Pelican</h2>
<div class="outline-text-2" id="text-4">
<p>
Pelican is a static site generator.  It is well designed with fairly
good layering and a plugin system.  HTML is generated from two paths:
the overall structure of the pages is determined by Jinja templates
driven by metadata while the "payload" content is directly converted
from the content source files.
</p>

<p>
It is the job of the "reader" layer to provide metadata and HTML
content.  The "reader" is an explicit layer in the Pelican design and
it comes with readers that support Markdown, rST and AsciiDoc.  One
may also provide the "reader" as a plugin which is what OrgOnPy does
to add support for source files in Org markup.  The <a href="https://github.com/brettviren/orgonpy/tree/master/pelican-plugin/orgonpy">OrgOnPy Pelican
reader</a> is heavily inspired by <a href="https://github.com/getpelican/pelican-plugins/tree/master/org_reader"><code>org_reader</code></a> which is part of the
Pelican plugin collection.  OrgOnPy also provides a <a href="https://github.com/brettviren/orgonpy/tree/master/pelican-plugin/extract_toc">modified version
of the <code>extract_toc</code></a> plugin also from the Pelican plugin collection.
</p>

<p>
Pelican has a number of "themes" which provide for HTML structure and
CSS styling.  For the most part a theme is defined at a layer boundary
so that most themes can be interchanged without changes to the source
content files.  I made a <a href="./pelican-themes.html">a survey of Pelican themes</a> ultimately
settling on <a href="https://github.com/talha131/pelican-elegant/">elegant</a> as being closest in structure and functionality to
what I wanted.  Inevitably I wanted to tweak so I have lightly <a href="https://github.com/brettviren/org-pub/tree/master/pelican/site/themes/elegant">forked elegant</a>.
</p>
</div>

<div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> Machinations</h3>
<div class="outline-text-3" id="text-4-1">
<p>
Create an environment for building the web site
</p>

<pre class="example">
$ virtualenv venv
$ source venv/bin/activate
$ pip install pelican beautifulsoup4
</pre>

<p>
Build the site
</p>

<pre class="example">
$ cd ~/org-pub/pelican/site
$ pelican
$ (cd output &amp;&amp; python -m pelican.server)
</pre>

<p>
Content is held in <code>site/content/</code> and exists as either immediate
files or relative symlinks to sub-directories of <code>topics/</code>.
</p>

<p>
That build locally.  Deployment is done with the help of the Fabric file and goes like:
</p>

<pre class="example">
$ pip install fabric
$
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> Links</h2>
<div class="outline-text-2" id="text-5">
<p>
There are other ways to use Org to make web pages.  Here are some I've looked at.
</p>

<ul class="org-ul">
<li><a href="http://www.seas.upenn.edu/~heqin/academic/sitecreation.html">http://www.seas.upenn.edu/~heqin/academic/sitecreation.html</a>
</li>
<li><a href="http://doc.norang.ca/org-mode.html">http://doc.norang.ca/org-mode.html</a>
</li>
<li><a href="http://www.nicolas-petton.fr/blog/blogging-with-org-mode.html">http://www.nicolas-petton.fr/blog/blogging-with-org-mode.html</a>
</li>
<li><a href="http://stevenbagley.net/blog/blog-with-emacs-org-mode.html">http://stevenbagley.net/blog/blog-with-emacs-org-mode.html</a>
</li>
<li><a href="http://kerunix.com/blog-using-orgmode-and-pelican.html">http://kerunix.com/blog-using-orgmode-and-pelican.html</a>
</li>
<li><a href="http://steckerhalter.co.vu/posts/blogging-with-org-mode.html">http://steckerhalter.co.vu/posts/blogging-with-org-mode.html</a>
</li>
<li><a href="http://justinlilly.com/emacs/orgmode_static_site_generator.html">http://justinlilly.com/emacs/orgmode_static_site_generator.html</a>
</li>
</ul>
</div>
</div>



      <p/>
      </div><!-- main -->
      
      
    </div><!-- content container -->
    


    

    <footer class="col-md-12">
      
<hr/>
<a href="index.org">Org (index.org)</a><br>
<a href="index.pdf">PDF (index.pdf)</a><br>
<p>
  Created: 2014-03-02 20:45:58<br>
  Revised: 2015-12-29 21:00:43<br>

    </footer>

    
    
    
    <script src="/static/jquery-1.12.0.min.js"></script>
    
    <script src="/static/bootstrap/js/bootstrap.min.js"></script>
    
    <script src="/static/highlight/highlight.pack.js"></script>
    
    <script src="/static/joy.js"></script>
    
    
    
    
    
    
     
  </body>

</html>