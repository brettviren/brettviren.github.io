<!DOCTYPE html>
<html lang="en">
  <head>
    
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <title>They Call Me Brett</title>
    
    
    <link rel="stylesheet" href="/static/bootstrap/css/bootstrap.min.css">
    
    <link rel="stylesheet" href="/static/font-awesom/css/font-awesome.min.css">
    
    <link rel="stylesheet" href="/static/themes/yeti/css/base.css">
    
    <link rel="stylesheet" href="/static/highlight/styles/default.css">
    
    <link rel="stylesheet" href="/static/octicons/octicons.css">
    
    

    
  </head>
  
  <body>
    

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">

        
        <div class="navbar-header">
          
          
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>

          
          <a class="navbar-brand" href="..">They Call Me Brett</a>
        </div><!-- navbar-header -->

        
        <div class="navbar-collapse collapse">
          
          
          <ul class="nav navbar-nav">
	    
	    
	    
	    <li><a href="topics.html">Articles</a></li>
	    
	    
	    <li><a href="blog.html">Blog</a></li>
	    
	    
	    <li><a href="feed.html">Feeds</a></li>
	    
	    
          </ul>
          
          
          <ul class="nav navbar-nav navbar-right">
	    
            <li >
              <a rel="up" href="..">
                <i class="fa fa-arrow-up"></i> Up
              </a>
            </li>
	    
          </ul>
        </div>

      </div><!-- container -->
    </div><!-- navbar -->

    <div class="container">
      
      <div class="col-md-3">
        <div class="bs-sidebar hidden-print affix well" role="complementary">
          <ul class="nav bs-sidenav">
            <li class="main active"><a href="#">Top</a></li>
	    
<li class="">
  <a href="#sec-1">1. Certificates</a><ul class="nav">
<li class="">
  <a href="#sec-1-1">1.1. DocDB and certificates</a></li>
<li class="">
  <a href="#sec-1-2">1.2. Grid Certificates</a></li></ul></li>
<li class="">
  <a href="#sec-2">2. FNAL</a><ul class="nav">
<li class="">
  <a href="#sec-2-1">2.1. dCache</a></li></ul></li>

	  </ul>
	</div>
      </div>
      
      <div class="col-md-9" role="main">

	<h1 class="page-title">
	  
LBNE access control.

	  <small>
</small>
	</h1>
      
	<p/>
	
	

2014-07-05 12:29:18(revised 2014-07-05 13:12:04 )<blockquote>LBNE has various access control methods.  Some related to a particular site, some to the Grid and some which mix the two.  This topic collects information about these.</blockquote>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Certificates</h2>
<div class="outline-text-2" id="text-1">
<p>
Certificates may be used for accessing DocDB or "grid" resources which includes remote-access of LBNE data.
</p>
</div>

<div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> DocDB and certificates</h3>
<div class="outline-text-3" id="text-1-1">
<p>
to write: using SILogon, getting cert accepted by docdb
</p>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> Grid Certificates</h3>
<div class="outline-text-3" id="text-1-2">
<p>
There are two ways to obtain a "grid" certificate.  One is from the Open Science Grid (OSG) and one is to generate an ephemeral one from a Fermilab Kerberos ticket.
</p>

<p>
to write:
</p>

<ul class="org-ul">
<li>getting a cert from kerberos using kx509
</li>
<li>getting an OSG certificate, converting to .pem files, voms-init, adding to VO
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> FNAL</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> dCache</h3>
<div class="outline-text-3" id="text-2-1">
<p>
See <a href="https://cdcvs.fnal.gov/redmine/projects/lbne-software-and-computing/wiki/Using_LBNE_dCache_Scratch_Space_at_Fermilab">here</a> for example.
</p>

<pre class="example">
bviren@lycastus:~&gt; ssh bv@lbnegpvm01.fnal.gov
bv@lbnegpvm01:~&gt; export ROLE=Analysis
bv@lbnegpvm01:~&gt; export EXPERIMENT=lbne
bv@lbnegpvm01:~&gt; kx509
Service kx509/certificate
 issuer= /DC=gov/DC=fnal/O=Fermilab/OU=Certificate Authorities/CN=Kerberized CA HSM
 subject= /DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Brett M. Viren/CN=UID:bv
 serial=02C7AF3B
 hash=1a58ef67
bv@lbnegpvm01:~&gt; voms-proxy-init -rfc -noregen -voms lbne:/lbne/Role=$ROLE -valid 24:00
Your identity: /DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Brett M. Viren/CN=UID:bv
Contacting  voms1.fnal.gov:15029 [/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=voms1.fnal.gov] "lbne" Done
Creating proxy ..................................................................................................... Done

Your proxy is valid until Wed Jul  2 15:21:22 2014
bv@lbnegpvm01:~&gt; voms-proxy-info -all
subject   : /DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Brett M. Viren/CN=UID:bv/CN=992229234
issuer    : /DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Brett M. Viren/CN=UID:bv
identity  : /DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Brett M. Viren/CN=UID:bv
type      : RFC compliant proxy
strength  : 1024 bits
path      : /tmp/x509up_u9716
timeleft  : 23:59:56
key usage : Digital Signature, Key Encipherment
=== VO lbne extension information ===
VO        : lbne
subject   : /DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Brett M. Viren/CN=UID:bv
issuer    : /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=voms1.fnal.gov
attribute : /lbne/Role=Analysis/Capability=NULL
attribute : /lbne/Role=NULL/Capability=NULL
timeleft  : 23:59:56
uri       : voms1.fnal.gov:15029
bv@lbnegpvm01:~&gt; which root
/usr/bin/which: no root in (/usr/krb5/bin:/usr/lib64/qt-3.3/bin:/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin)
bv@lbnegpvm01:~&gt; . /grid/fermiapp/products/common/etc/setups.sh
bv@lbnegpvm01:~&gt; setup ifdhc
bv@lbnegpvm01:~&gt; ups list -aK+ -z /grid/fermiapp/products/lbne/db |grep root
"root" "v5_26_00" "Linux+2.6" "GCC_3_4_6" "" 
"root" "v5_32_00" "Linux+2.6-2.5" "" "" 
"root" "v5_32_00" "Linux64bit+2.6-2.5" "" "" 
bv@lbnegpvm01:~&gt;  setup root v5_32_00 -z /grid/fermiapp/products/lbne/db
bv@lbnegpvm01:~&gt; xrdcp root://fndca1.fnal.gov:1094/pnfs/fnal.gov/usr/lbne/mc/lbne/simulated/001/35T_singleparticle_pizero_30_1.root /tmp/junk.root
-bash: xrdcp: command not found
bv@lbnegpvm01:~&gt; root -l root://fndca1.fnal.gov:1094/pnfs/fnal.gov/usr/lbne/mc/lbne/simulated/001/35T_singleparticle_pizero_30_1.root 
 *** DISPLAY not set, setting it to 130.199.229.13:0.0
dlopen error: libXrdOuc.so.0: cannot open shared object file: No such file or directory
Load Error: Failed to load Dynamic link library /grid/fermiapp/products/lbne/prd/root/v5_32_00/Linux64bit-2-6-2-5/lib/libNetx.so
root [0] 
Attaching file root://fndca1.fnal.gov:1094/pnfs/fnal.gov/usr/lbne/mc/lbne/simulated/001/35T_singleparticle_pizero_30_1.root as _file0...
Error in &lt;TPluginHandler::SetupCallEnv&gt;: class TXNetSystem not found in plugin Netx
Error in &lt;TPluginHandler::SetupCallEnv&gt;: class TXNetFile not found in plugin Netx
</pre>

<p>
Okay, not xrootd there hunt through the UPS forest some more and:
</p>

<pre class="example">
bv@lbnegpvm01:~&gt; ls -d /grid/fermiapp/products/*/xroot*
/grid/fermiapp/products/larsoft/xrootd
bv@lbnegpvm01:~&gt; ups list -aK+ -z /grid/fermiapp/products/larsoft |grep root
..."xrootd" "v3_3_6a" "Linux64bit+2.6-2.12" "e5:prof" "" 
bv@lbnegpvm01:~&gt; setup xrootd v3_3_6a -q e5:prof -z /grid/fermiapp/products/larsoft 
bv@lbnegpvm01:~&gt; xrdcp root://fndca1.fnal.gov:1094/pnfs/fnal.gov/usr/lbne/mc/lbne/simulated/001/35T_singleparticle_pizero_30_1.root  /tmp/junk.root
[xrootd] Total 117.07 MB	|====================| 100.00 % [119.7 MB/s]
</pre>

<p>
Eventual success.
</p>
</div>
</div>
</div>



      <p/>
      </div><!-- main -->
      
      
    </div><!-- content container -->
    


    

    <footer class="col-md-12">
      
<hr/>
<a href="index.org">Org (index.org)</a><br>
<a href="index.pdf">PDF (index.pdf)</a><br>
<p>
  Created: 2014-07-05 12:29:18<br>
  Revised: 2014-07-05 13:12:04<br>

    </footer>

    
    
    
    <script src="/static/jquery-1.12.0.min.js"></script>
    
    <script src="/static/bootstrap/js/bootstrap.min.js"></script>
    
    <script src="/static/highlight/highlight.pack.js"></script>
    
    <script src="/static/joy.js"></script>
    
    
    
    
    
    
     
  </body>

</html>